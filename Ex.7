import pandas as pd
import geopandas as gpd
import matplotlib.pyplot as plt

# Sample data
world_data = pd.DataFrame({
    'Country': ['United States of America', 'Canada', 'India', 'Brazil', 'China'],
    'Value': [100, 150, 200, 80, 120]
})

india_states_data = pd.DataFrame({
    'State': ['Maharashtra', 'Karnataka', 'Tamil Nadu', 'Uttar Pradesh', 'Gujarat'],
    'Value': [50, 75, 60, 40, 30]
})

india_districts_data = pd.DataFrame({
    'District': ['Mumbai', 'Bengaluru', 'Chennai', 'Lucknow', 'Ahmedabad'],
    'Value': [20, 30, 25, 15, 10]
})

# Load map data
world_map = gpd.read_file(gpd.datasets.get_path('naturalearth_lowres'))

# Merge for world data
world_data_geo = world_map.merge(world_data, how='left', left_on='name', right_on='Country')

# Reuse world_map for India state/district simulation (because actual Indian district/state shapefiles are not provided)
india_map = world_map[world_map['name'] == 'India']  # Extract only India

# For the sake of demonstration, duplicate India's shape to mock state and district data
india_states_map = india_map.copy()
india_districts_map = india_map.copy()

# Add dummy 'name' columns to simulate matching
india_states_map = india_states_map.assign(name=india_states_data['State'])
india_districts_map = india_districts_map.assign(name=india_districts_data['District'])

# Merge
india_states_geo = india_states_map.merge(india_states_data, how='left', left_on='name', right_on='State')
india_districts_geo = india_districts_map.merge(india_districts_data, how='left', left_on='name', right_on='District')

# Plotting
fig, axs = plt.subplots(1, 3, figsize=(18, 6))

# World map
axs[0].set_title('World Data')
world_data_geo.boundary.plot(ax=axs[0], linewidth=0.5, color='black')
world_data_geo.plot(column='Value', ax=axs[0], legend=True, cmap='Blues',
                    legend_kwds={'label': "Values by Country"})

# India states map
axs[1].set_title('India States Data')
india_states_geo.boundary.plot(ax=axs[1], linewidth=0.5, color='black')
india_states_geo.plot(column='Value', ax=axs[1], legend=True, cmap='Greens',
                      legend_kwds={'label': "Values by State"})

# India districts map
axs[2].set_title('India Districts Data')
india_districts_geo.boundary.plot(ax=axs[2], linewidth=0.5, color='black')
india_districts_geo.plot(column='Value', ax=axs[2], legend=True, cmap='Oranges',
                         legend_kwds={'label': "Values by District"})

plt.tight_layout()
plt.show()
